<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="utf-8">
    <title>Pistache i RapidJSON - prosty obiekt w odpowiedzi</title>
    <meta name="robots" content="index,follow"/> 
    <meta name="revisit-after" content="1 days"/>        
    <meta name="viewport" content="width=device-width, initial-scale=1" >
    <meta name="HandheldFriendly" content="True"/>
    <meta name="MobileOptimized" content="320"/>
    <meta name="description" content="Przykład odpowiedzi prostym obiektem JSON w Pistache"/>
    <meta name="keywords" content="daj się poznać 2017, konkurs programistyczny, aplikacja konkursowa, drug dose framework, aplikacja mobilna, pas pediatryczny, dawkowanie leków, pistache, rapidjson, json"/>
    <meta name="author" content="Maciej Lew"/>
    <link rel="stylesheet" href="/css/main.css" type='text/css'>
    <link href="http://lion.net.pl/blog/feed.xml" type="application/atom+xml" rel="alternate" title="LionNet blog posts (atom)" />
</head>
<body>
    <header>
        <div id="name_module" class="module">
            <h1>
                <a href="/" rel="index">LionNet</a>
            </h1>
        </div>
        
        <nav id="navigation_module" class="module">
            <h2 class="hidden">Nawigacja</h2>
            <ul>
                <li>
                    <a href="/" rel="index author">O mnie</a>
                </li>
                <li>
                    <a href="/umiejetnosci/" rel="author">Umiejętności</a>
                </li>
                <li>
                    <a href="/lan-management-system/">Lan Managment System</a>
                </li>
                <li>
                    <a href="/blog/">Blog informatyczny</a>
                </li>
                <li>
                    <a href="/mapa/">Mapa strony</a>
                </li>
            </ul>
        </nav>

        <div id="description_module" class="module">
            Programowanie, sieci komputerowe, informatyka.
        </div>
        
        
    </header>
    
    <main>
        
<article class="blog_module module">
    <h2>Pistache i RapidJSON - prosty obiekt w odpowiedzi</h2>
    <hr>

    <p>Zdecydowałem się wykorzystać bibliotekę RapidJSON w mojej aplikacji DDS. Kilka 
kolejnych artykułów będzie jej poświęconych. W tym wpisie pokażę jak zbudować i 
zwrócić przy pomocy Pistache prosty obiekt JSON.</p>

<h3 id="budowniczy-obiekt%C3%B3w-json-w-rapidjson">Budowniczy obiektów JSON w RapidJSON</h3>

<p>Jak zarejestrować metodę odpowiadającą na żądanie REST pisałem na blogu w wpisie
<a href="/2017/03/25/front-controller-w-pistache.html">"Front controller w Pistache"</a>. Gdy już mamy to gotowe, najprostsza metoda
może wyglądać następująco:</p>

<pre><code>void ProjectHandler::onRequest(const Rest::Request&amp; request, Net::Http::ResponseWriter response) {
    StringBuffer s;
    Writer&lt;StringBuffer&gt; writer(s);
    writer.StartObject();
    writer.Key("name");
    writer.String(DDS_NAME);
    writer.Key("full_name");
    writer.String(DDS_FULL_NAME);
    writer.Key("version");
    writer.String(DDS_VERSION);
    writer.Key("license");
    writer.String(DDS_LICENSE);
    writer.EndObject();
    response.send(Http::Code::Ok, s.GetString());
}
</code></pre>

<p>To co tu widać, to najprostsza budowa obiektu JSON w RapidJSON. Nie ma
tu żadnej interakcji z użytkownikiem, otwierania strumieni, zaczytywania JSON z pliku 
itp. "Otwieramy" obiekt, dodajemy kolejne pola-klucze i ich wartości, "zamykamy"
obiekt. Tekstową reprezentację obiektu wysyłamy w odpowiedzi HTTP do użytkownika.
Prawda że proste? Można by oczywiście ten łańcuch znaków przygotować po prost sklejając
wszystko przy pomocy podstawowych operacji na łańcuchach, czy też wykorzystując sprint,
ale API oferowane przez RapidJSON wydaje się po prostu ładniejsze od własnoręcznego
rzeźbienia w JSON.</p>

<p>W kolejnych wpisach postaram się pokazać jak przesłać odpowiedź w formacie JSON
pobraną z pliku.</p>


</article>



    </main>
    
    </body>
</html>
