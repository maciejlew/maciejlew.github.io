<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="utf-8">
    <title>Pistache i RapidJSON - prosty obiekt w odpowiedzi</title>
    <meta name="robots" content="index,follow"/> 
    <meta name="revisit-after" content="1 days"/>        
    <meta name="viewport" content="width=device-width, initial-scale=1" >
    <meta name="HandheldFriendly" content="True"/>
    <meta name="MobileOptimized" content="320"/>
    <meta name="description" content="Przykład odpowiedzi prostym obiektem JSON w Pistache"/>
    <meta name="keywords" content="daj się poznać 2017, konkurs programistyczny, aplikacja konkursowa, drug dose framework, aplikacja mobilna, pas pediatryczny, dawkowanie leków, pistache, rapidjson, json"/>
    <meta name="author" content="Maciej Lew"/>
    <link rel="stylesheet" href="/assets/css/base.css" type='text/css'>
    <link href="http://lion.net.pl/blog/feed.xml" type="application/atom+xml" rel="alternate" title="LionNet blog posts (atom)" />

    <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "WebSite",
        "name": "LionNet",        "description": "Programowanie, sieci komputerowe, informatyka.",        "url": "http://lion.net.pl",        "author": 
            {
                "@type": "Person",
                "name": "Maciej Lew"
            },        "dateCreated": "2014-06-19",        "dateModified": "2014-06-19"
    }
</script>
<script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "WebPage",
        "name": "Pistache i RapidJSON - prosty obiekt w odpowiedzi",        "description": "Przykład odpowiedzi prostym obiektem JSON w Pistache",        "author": 
            {
                "@type": "Person",
                "name": "Maciej Lew"
            },        "dateCreated": "2017-03-28",                "url": "http://lion.net.pl/2017/03/28/pistache-i-rapidjson-prosty-obiekt-json-w-odpowiedzi.html"
    }
</script>

</head>
<body>

    <nav id="topnav">
        <div>
            <a href="/" rel="start index author">
                <img src="/assets/img/lion.net.pl.svg" width="64px" height="64px">
            </a>
            <ul>
                <li>
                    <a href="/" rel="start index author">LionNet</a>
                </li>
                <ul>
                    <li><a href="/lan-management-system/" rel="contents section">Lan Management System</a></li>
                </ul>
                <ul>
                    <li><a href="/drug-dose/" rel="contents section">Drug Dose</a></li>
                </ul>
            </ul>
        </div>
    </nav>

    <section id="content">

        <section id="headline">
            <header>
                <h1>Pistache i RapidJSON - prosty obiekt w odpowiedzi</h1>
            </header>
        </section>

        <section id="body">

            <div>
<article class="blog_module module">

    <p>Zdecydowałem się wykorzystać bibliotekę RapidJSON w mojej aplikacji DDS. Kilka 
kolejnych artykułów będzie jej poświęconych. W tym wpisie pokażę jak zbudować i 
zwrócić przy pomocy Pistache prosty obiekt JSON.</p>

<h3 id="budowniczy-obiekt%C3%B3w-json-w-rapidjson">Budowniczy obiektów JSON w RapidJSON</h3>

<p>Jak zarejestrować metodę odpowiadającą na żądanie REST pisałem na blogu w wpisie
<a href="/2017/03/25/front-controller-w-pistache.html">"Front controller w Pistache"</a>. Gdy już mamy to gotowe, najprostsza metoda
może wyglądać następująco:</p>

<pre><code>void ProjectHandler::onRequest(const Rest::Request&amp; request, Net::Http::ResponseWriter response) {
    StringBuffer s;
    Writer&lt;StringBuffer&gt; writer(s);
    writer.StartObject();
    writer.Key("name");
    writer.String(DDS_NAME);
    writer.Key("full_name");
    writer.String(DDS_FULL_NAME);
    writer.Key("version");
    writer.String(DDS_VERSION);
    writer.Key("license");
    writer.String(DDS_LICENSE);
    writer.EndObject();
    response.send(Http::Code::Ok, s.GetString());
}
</code></pre>

<p>To co tu widać, to najprostsza budowa obiektu JSON w RapidJSON. Nie ma
tu żadnej interakcji z użytkownikiem, otwierania strumieni, zaczytywania JSON z pliku 
itp. "Otwieramy" obiekt, dodajemy kolejne pola-klucze i ich wartości, "zamykamy"
obiekt. Tekstową reprezentację obiektu wysyłamy w odpowiedzi HTTP do użytkownika.
Prawda że proste? Można by oczywiście ten łańcuch znaków przygotować po prost sklejając
wszystko przy pomocy podstawowych operacji na łańcuchach, czy też wykorzystując sprint,
ale API oferowane przez RapidJSON wydaje się po prostu ładniejsze od własnoręcznego
rzeźbienia w JSON.</p>

<p>W kolejnych wpisach postaram się pokazać jak przesłać odpowiedź w formacie JSON
pobraną z pliku.</p>


</article>


</div>

        </section>

    </section>

    <nav id="footer">
        <div class="wrapper">
            <div id="project-links">
                <h6>Projekty:</h6>
                <ul>
                    <li><a href="/lan-management-system/" rel="contents section">Lan Management System</a></li>
                </ul>
                <ul>
                    <li><a href="/drug-dose/" rel="contents section">Drug Dose</a></li>
                </ul>
            </div>
            <div id="site-links">
                <h6>Zobacz także:</h6>
                <ul>
                    <li><a href="/umiejetnosci/" rel="author">O LionNet</a></li>
                    <li><a href="/blog/" rel="contents">Blog IT</a></li>
                    <li><a href="/mapa/" rel="contents">Mapa strony</a></li>
                </ul>
            </div>
            <div id="copyrights-and-disclaimer">
                <h6>Polityka:</h6>
                <p>&copy; Copyright by LionNet 2014-2018.</p>
                <p>Strona wykorzystuje pliki cookies</p>
                <p>Korzystając ze strony wyrażasz zgodę na używanie plików cookies, zgodnie z aktualnymi ustawieniami przeglądarki.</p>
                <p>Więcej informacji znajdziesz na stronie dotyczącej <a href="/polityka-plikow-cookies/" rel="license copyrights help nofollow">polityki plików cookie</a>.</p>
            </div>
        </div>
    </nav>

    </body>
</html>
