<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="utf-8">
    <title>Nie używaj String|Numer|Boolean jako konstruktorów w JavaScript!</title>
    <meta name="robots" content="index,follow"/> 
    <meta name="revisit-after" content="1 days"/>        
    <meta name="viewport" content="width=device-width, initial-scale=1" >
    <meta name="HandheldFriendly" content="True"/>
    <meta name="MobileOptimized" content="320"/>
    <meta name="description" content="Dlaczego nie powinno się używać String|Numer|Boolean jako konstruktorów w JavaScript?"/>
    <meta name="keywords" content="java script, programowanie obiektowe, prymitywy, obiekty wbudowane, obiekty podstawowe, typy proste, string, number, boolean, konstruktory, dobre  praktyki wytwarzania oprogramowania, refaktoryzacja"/>
    <meta name="author" content="Maciej Lew"/>
    <link rel="stylesheet" href="/assets/css/base.css" type='text/css'>
    <link href="http://lion.net.pl/blog/feed.xml" type="application/atom+xml" rel="alternate" title="LionNet blog posts (atom)" />

    <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "WebSite",
        "name": "LionNet",        "description": "Programowanie, sieci komputerowe, informatyka.",        "url": "http://lion.net.pl",        "author": 
            {
                "@type": "Person",
                "name": "Maciej Lew"
            },        "dateCreated": "2014-06-19",        "dateModified": "2014-06-19"
    }
</script>
<script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "WebPage",
        "name": "Nie używaj String|Numer|Boolean jako konstruktorów w JavaScript!",        "description": "Dlaczego nie powinno się używać String|Numer|Boolean jako konstruktorów w JavaScript?",        "author": 
            {
                "@type": "Person",
                "name": "Maciej Lew"
            },        "dateCreated": "2016-05-19",        "breadcrumb":
            {
                "@type": "BreadcrumbList",
                "itemListElement": [                    {
                        "@type": "ListItem",
                        "position": ,
                        "item": {
                            "@type": "AboutPage",
                            "@id": "http://lion.net.pl/",
                            "name": "LionNet"
                        }
                    },                                    {
                        "@type": "ListItem",
                        "position": ,
                        "item": {
                            "@type": "CollectionPage",
                            "@id": "http://lion.net.pl/blog/",
                            "name": "Blog"
                        }
                    },                                    {
                        "@type": "ListItem",
                        "position": ,
                        "item": {
                            "@type": "BlogPosting",
                            "@id": "http://lion.net.pl/2016/05/19/nie-uzywaj-string-number-boolean-jako-konstruktorow-w-javascript.html",
                            "name": "Nie używaj String|Numer|Boolean jako konstruktorów w JavaScript!"
                        }
                    },                ]
            },        "url": "http://lion.net.pl/2016/05/19/nie-uzywaj-string-number-boolean-jako-konstruktorow-w-javascript.html"
    }
</script>

</head>
<body>

    <nav id="topnav">
        <div>
            <a href="/" rel="start index author">
                <img src="/assets/img/lion.net.pl.svg" width="64px" height="64px">
            </a>
            <ul>
                <li>
                    <a href="/" rel="start index author">LionNet</a>
                </li>
                <ul>
                    <li><a href="/lan-management-system/" rel="contents section">Lan Management System</a></li>
                </ul>
                <ul>
                    <li><a href="/drug-dose/" rel="contents section">Drug Dose</a></li>
                </ul>
            </ul>
        </div>
    </nav>

    <section id="content">

        <section id="headline">
            <header>
                <h1>Nie używaj String|Numer|Boolean jako konstruktorów w JavaScript!</h1>
            </header>
        </section>

        <section id="body">

            <div>
<article class="blog_module module">

    <p>Śmieszne może się wydawać to że w języku obiektowym (czy też prototypowanym) jest 
możliwość utworzenia prostych obiektów opakowujących wartości proste, a 
jednocześnie wszyscy odradzają korzystania z nich. W tym wpisie dowiesz się dlaczego
tak właśnie dzieje się w JavaScript.</p>

<h3 id="typy-proste-w-js">Typy proste w JS</h3>

<p>JS posiada kilka prymitywów, czyli typów reprezentujących najprostsze i najczęściej
wykorzystywane w aplikacjach byty. Są to <em>boolean, number, string, null, undefined</em>.
Pierwsze trzy możemy utworzyć wykorzystując konstruktory obiektów o tej samej nazwie:</p>

<pre><code>var b1 = true;
var b2 = new Boolean(true);
var n1 = 1;
var n2 = new Number(1);
var s1 = 'a';
var s2 = new String('a');
</code></pre>

<p>Wszystko fajnie, dopóki nie musimy gdzieś w kodzie sprawdzić typu zmiennej by np.
<a href="/2016/04/05/typy-wyjatkow-w-javascript.html">rzucić odpowiednim wyjątkiem</a>. Jeśli w naszej domenie zmienna powinna być 
stringiem to musimy to zrobić np. tak:</p>

<pre><code>if (!(s instanceof String) || typeof s !== 'string') {
    throw new TypeError('Wrong type!');
}
</code></pre>

<p>Sprawdzenie samym <em>typeof</em> nic nam niestety nie pomoże bo:</p>

<pre><code>typeof new String('a') === 'object'
</code></pre>

<p>Kolejne problemy pojawią się gdy będziemy chcieli porównać wartość zmiennej:</p>

<pre><code>if (s === 'a') {
    console.log('wartość s to a');
}
</code></pre>

<p>W przypadku gdy <em>s = s2</em> powyższe sprawdzenie nam nie zadziała. W przypadku gdy 
<em>s = s1</em>, zobaczymy w konsoli log. Możemy, co prawda, zrezygnować z operatora ===
i zastąpić go słabszym porównaniem ==, ale nie jest to zalecana praktyka która 
pociąga za sobą inne problemy.</p>

<p>Przedstawione powyżej problemy są dwoma głównymi przyczynami dla których <strong>nie zaleca
się korzystać z wbudowanych w JS obiektów String, Number i Boolean</strong>. <a href="/2016/05/16/jshint-jakosc-kodu-js-pod-kontrola.html">Narzędzie
do analizy statycznej kodu JSHint</a> po natrafieniu na wykorzystanie w kodzie 
konstruktora <em>new</em> powyższych typów zgłasza błąd, np: <em>"Do not use Number as a 
constructor"</em>. Na szczęście wykrycie tego typu pułapek w kodzie i zastąpienie
ich typami prostymi jest bardzo łatwe, a może zaoszczędzić wielu nieporozumień
w przyszłości.</p>

<p>Muszę się przyznać, że sam nadużywałem tworzenia obiektów Number i String. Robiłem 
to aby choć trochę zapanować nad tym co się dzieje ze zmiennymi w moim <a href="https://github.com/maciejlew/drug-dose-framework">projekcie
DDF</a> i zrobić sobie substytut silnego typowania. Taki podejście niestety wiąże 
się z dużą ilością nadmiarowego kodu sprawdzającego typy zmiennych i konwertującego
prymitywy do obiektów je opakowujących. To się po prostu nie opłaca. Po 
refraktoryzacji do typów prostych kod wygląda bardziej czytelnie, jest go także
dużo mniej. Ilość przypadków testowych dla testów jednostkowych także spada.
Łatwiej jest zadbać o dobre <a href="/2016/05/18/code-coverage-w-karma.html">pokrycie kodu testami</a>.</p>


</article>


</div>

        </section>

    </section>

    <nav id="footer">
        <div class="wrapper">
            <div id="project-links">
                <h6>Projekty:</h6>
                <ul>
                    <li><a href="/lan-management-system/" rel="contents section">Lan Management System</a></li>
                </ul>
                <ul>
                    <li><a href="/drug-dose/" rel="contents section">Drug Dose</a></li>
                </ul>
            </div>
            <div id="site-links">
                <h6>Zobacz także:</h6>
                <ul>
                    <li><a href="/umiejetnosci/" rel="author">O LionNet</a></li>
                    <li><a href="/blog/" rel="contents">Blog IT</a></li>
                    <li><a href="/mapa/" rel="contents">Mapa strony</a></li>
                </ul>
            </div>
            <div id="copyrights-and-disclaimer">
                <h6>Polityka:</h6>
                <p>&copy; Copyright by LionNet 2014-2018.</p>
                <p>Strona wykorzystuje pliki cookies</p>
                <p>Korzystając ze strony wyrażasz zgodę na używanie plików cookies, zgodnie z aktualnymi ustawieniami przeglądarki.</p>
                <p>Więcej informacji znajdziesz na stronie dotyczącej <a href="/polityka-plikow-cookies/" rel="license copyrights help nofollow">polityki plików cookie</a>.</p>
            </div>
        </div>
    </nav>

    </body>
</html>
